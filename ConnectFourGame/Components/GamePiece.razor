@using System.Collections.Generic
@using Microsoft.AspNetCore.Components

<div class="cell @GetCellClass()" aria-label="@GetAriaLabel()">
    @if (CurrentPlayer != 0)
    {
        <div class="piece @GetPieceClass()"></div>
    }
</div>

@code {
    [Parameter]
    public int Row { get; set; }

    [Parameter]
    public int Column { get; set; }

    [Parameter]
    public int CurrentPlayer { get; set; }

    [Parameter]
    public int GameWinner { get; set; }

    [Parameter]
    public List<(int column, int row)> WinningCells { get; set; } = new();

    private bool IsWinningCell => WinningCells.Contains((Column, Row));

    private string GetCellClass()
        => IsWinningCell ? "winning-cell" : string.Empty;

    private string GetPieceClass()
    {
        var classes = $"player{CurrentPlayer}";
        if (IsWinningCell)
        {
            classes += " winning-piece";
        }

        return classes;
    }

    private string GetAriaLabel()
    {
        if (CurrentPlayer == 0)
        {
            return $"Empty cell at row {Row + 1}, column {Column + 1}";
        }

        return $"Player {CurrentPlayer} piece at row {Row + 1}, column {Column + 1}";
    }
}
